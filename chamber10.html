<!doctype html>
<html class="staticrypt-html">
<head>
    <meta charset="utf-8">
    <title>Chamber Room 10</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
	
	<link rel="stylesheet" href="crypto.css">
</head>

<body class="staticrypt-body">
	<audio controls autoplay loop>
		<source src="music/hpotter.mp3" type="audio/mpeg">
	</audio>
	
	
<div class="staticrypt-page">
    <div class="staticrypt-form">
        <div class="staticrypt-instructions">
            <p class="staticrypt-title">Alan chose this password...</p>
        </div>

        <hr class="staticrypt-hr">

        <form id="staticrypt-form" action="#" method="post">
            <input id="staticrypt-password"
                   type="password"
                   name="password"
                   placeholder="enter your wrong guess here"
                   autofocus/>

            <input type="submit" class="staticrypt-decrypt-button" value="GUESS"/>
        </form>
    </div>

</div>

<script src="algo.js"></script>

<script>

	var count = 0;
    document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
        e.preventDefault();

		
		var pass = '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';
		var passphrase = document.getElementById('staticrypt-password').value,
            encryptedMsg = pass,
            encryptedHMAC = encryptedMsg.substring(0, 64),
            encryptedHTML = encryptedMsg.substring(64),
            decryptedHMAC = CryptoJS.HmacSHA256(encryptedHTML, CryptoJS.SHA256(passphrase).toString()).toString();

		if (count<5){
			if (decryptedHMAC !== encryptedHMAC) {
				count++;
				alert('Wrong guess idiot!');
				return;
			}
		} else{
			window.location.href = "chamberofsecrets.html";
		}
        

        var plainHTML = CryptoJS.AES.decrypt(encryptedHTML, passphrase).toString(CryptoJS.enc.Utf8);

        document.write(plainHTML);
        document.close();
    });
</script>

</body>
</html>
