<!doctype html>
<html class="staticrypt-html">
<head>
    <meta charset="utf-8">
    <title>Chamber Room 10</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
	
	<link rel="stylesheet" href="crypto.css">
</head>

<body class="staticrypt-body">
	<audio controls autoplay loop>
		<source src="music/hpotter.mp3" type="audio/mpeg">
	</audio>
	
	
<div class="staticrypt-page">
    <div class="staticrypt-form">
        <div class="staticrypt-instructions">
            <p class="staticrypt-title">Alan chose this password...</p>
        </div>

        <hr class="staticrypt-hr">

        <form id="staticrypt-form" action="#" method="post">
            <input id="staticrypt-password"
                   type="password"
                   name="password"
                   placeholder="enter your wrong guess here"
                   autofocus/>

            <input type="submit" class="staticrypt-decrypt-button" value="GUESS"/>
        </form>
    </div>

</div>

<script src="algo.js"></script>

<script>

	var count = 0;
    document.getElementById('staticrypt-form').addEventListener('submit', function(e) {
        e.preventDefault();

		
		var pass = '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';
		var passphrase = document.getElementById('staticrypt-password').value,
            encryptedMsg = pass,
            encryptedHMAC = encryptedMsg.substring(0, 64),
            encryptedHTML = encryptedMsg.substring(64),
            decryptedHMAC = CryptoJS.HmacSHA256(encryptedHTML, CryptoJS.SHA256(passphrase).toString()).toString();

		if (count<5){
			if (decryptedHMAC !== encryptedHMAC) {
				count++;
				alert('Wrong guess idiot!');
				return;
			}
		} else{
			window.location.href = "chamberofsecrets.html";
		}
        

        var plainHTML = CryptoJS.AES.decrypt(encryptedHTML, passphrase).toString(CryptoJS.enc.Utf8);

        document.write(plainHTML);
        document.close();
    });
</script>

</body>
</html>
